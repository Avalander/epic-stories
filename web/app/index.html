<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Epic Stories</title>
	<base href="/">
	<link rel="shortcut icon" type="image/png" href="<%= require('./pinkie.png') %>">
</head>
<body>
	<script>
		window.onerror = (message, source, lineno, colno, error) => {
			fetch('/api/report/error', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify({
					message,
					source,
					lineno,
					colno,
					error: {
						message: error.message,
						stack: error.stack,
					},
					from: window.location.href,
				})
			})
			.then(res => {
				document.body.innerHTML = `
				<h1>There was an error while runnig the app</h1>
				<h2>The error has been reported</h2>
				`
			})
			.catch(err => [
				document.body.innerHTML = `
				<h1>There was an error while running the app</h1>
				<h2>The error could not be reported, please send the following information to your web master</h2>
				<code>${error}</code>
				`
			])
		}
	</script>
</body>
</html>